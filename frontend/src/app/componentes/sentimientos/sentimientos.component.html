



<div class="d-flex flex-column " class="container-chart">

    <div class="card shadow mb-4">
        <!-- Card Header - Accordion -->
        <a id="collapsedLink" href="#collapseCard" class="d-block card-header py-3" data-toggle="collapse" role="button"
            aria-expanded="true" aria-controls="collapseCard"  (click)="colapsar()">
            <h6 class="m-0 font-weight-bold text-primary">Seleccionar Descarga</h6>
        </a>
    
    
    
        <!-- Card Content - Collapse -->
        <div class="collapse show" id="collapseCard">
            <div class="card-body">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <form class="user">
                                <div class="form-row">
    
                                    <div class="col-md-3 mb-3">
                                        <div class="form-group">
                                            <label for="FechaDes" class="ml-3">Fecha desde</label>
                                            <input type="Date" name="FechaDes" class="form-control border bg-gradient-light"
                                                placeholder="Fecha Desde" [(ngModel)]="fechaDesde" />
                                        </div>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <div class="form-group">
                                            <label for="FechaHas" class="ml-3">Fecha hasta</label>
                                            <input type="Date" name="FechaHas" class="form-control border bg-gradient-light"
                                                placeholder="Fecha Hasta" [(ngModel)]="fechaHasta" />
                                        </div>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="companysSelect" class="ml-3">Empresa</label>
                                        <select id="companysSelect" class="form-control border bg-gradient-light" name="compañias"
                                            (change)="obtenerDescarga()" 
                                            [(ngModel)]="idCompanySelect">
                                            <option value="default">Seleccione una empresa</option>
                                            <option *ngFor="let company of listaCompany" value="{{company.id_company}}">
                                                {{company.name_company}}</option>
                                        </select>
                                    </div>
    
                                    <div class="col-md-3 mb-3">
                                        <label for="descargasSelect" class="ml-3">Descarga</label>
                                        <select id="descargasSelect" class="form-control border bg-gradient-light" name="descargas"
                                            (change)="resetChart()"
                                            [(ngModel)]="idDescargaSelect">
                                            <option value="default">Seleccione una descarga</option>
                                            <option *ngFor="let descarga of listaDescarga" value="{{descarga.id_descarga}}">Rango: {{descarga.Fecha_Des | date:'d-MM-yyyy'}} - {{descarga.Fecha_Has |date:'d-MM-yyyy'}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col text-center">
                                    <button class="btn btn-primary " (click)="validacion()">
                                        Confirmar
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card mb-4  py-3 border-left-primary text-primary pb-5 text-right" id="divChart" style="height:70%">
        <div class="col-12 mt-2">
            <h1 class="mb-2 mr-5">{{tittleGrafico}}</h1>
            <div id="chartdiv2" style="width: 100%; height: 100%"></div>
        </div>
    </div>
    
    


</div>

















<!-- 
<div id="cajaPrincipal">
    <h1>Analisis de sentimientos</h1>
    <p>A continuacion podrá ver el gráfico que representa los sentimientos de los usuarios que comentaron en los post incluidos en la descarga seleccionada de acuerdo al rango de fecha indicado.</p>
    <form #DescargaForm="ngForm" class="form-group row">
        <div class="col-6">
            <div class="row">
                <div id="cajaSecundaria" class="col-6">
                    <div class="form-group">
                        <div id="comodin">
                            <label for="FechaDes">Fecha de inicio</label>
                            <input type="Date" name="FechaDes" class="form-control" placeholder="Fecha Desde" [(ngModel)]="fechaDesde"/>
                        </div>
                    </div>
                </div>
                <div id="cajaSecundaria" class="col-6">
                    <div class="form-group">
                        <div id="comodin">
                            <label for="FechaHas">Fecha de termino:</label>
                            <input type="Date" name="FechaHas" class="form-control" placeholder="Fecha Hasta" [(ngModel)]="fechaHasta"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-6">
            <div class="row">
                <div id="cajaSecundaria" class="col-6">
                    <label for="compañias">Empresa:</label>
                    <select id="companysSelect" class="form-select" name="compañias"
                        (change)="obtenerDescarga()" 
                        [(ngModel)]="idCompanySelect">
                        <option value="default"></option>
                        <option *ngFor="let company of listaCompany" value="{{company.id_company}}">
                            {{company.name_company}}</option>
                    </select>
                    <br><br>
                </div>
                <div id="cajaSecundaria" class="col-6">
                    <label for="descargas">Descarga:</label>
                    <select id="descargasSelect" class="form-select" name="descargas"
                        (change)="resetChart()"
                        [(ngModel)]="idDescargaSelect">
                        <option value="default"></option>
                        <option *ngFor="let descarga of listaDescarga" value="{{descarga.id_descarga}}">Rango: {{descarga.Fecha_Des | date:'shortDate'}} - {{descarga.Fecha_Has |date:'shortDate'}}</option>
                    </select>
                    <br><br>
                </div>
            </div>


            <br />

            <div class="d-flex justify-content-md-center">
                <button class="btn btn-secondary mr-5" (click)="validacion()">
                    Confirmar
                </button>

            </div>
        </div>    
    </form>
    <div style="height: 500px">
        <script src="//www.amcharts.com/lib/4/core.js"></script>
        <script src="//www.amcharts.com/lib/4/charts.js"></script>
        <div id="chartdiv"></div>
    </div>
</div> -->